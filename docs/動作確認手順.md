# YouTube Summarizer 動作確認手順

## 1. バックエンドの準備

### 1-1. 環境変数（APIキー）の設定

1. `backend` フォルダで `.env` を作成する（`.env.example` をコピーしてOK）
   ```bash
   cd backend
   cp .env.example .env
   ```
2. `.env` を開き、**ANTHROPIC_API_KEY** を自分のキーに書き換える
   - [Anthropic Console](https://console.anthropic.com/) で API キーを発行できる
   - 例: `ANTHROPIC_API_KEY=sk-ant-api03-xxxx...`

### 1-2. 依存関係のインストール（初回のみ）

```bash
cd backend
python3 -m venv .venv
source .venv/bin/activate   # Windows: .venv\Scripts\activate
pip install -r requirements.txt
```

### 1-3. バックエンドを起動する

**ターミナル1** で実行:

```bash
cd backend
source .venv/bin/activate
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

- `Uvicorn running on http://0.0.0.0:8000` と出ればOK
- 止めるときは **Ctrl+C**

### 1-4. 動作確認（APIだけ）

ブラウザで次のURLを開く:
- http://localhost:8000/health  
→ `{"status":"ok"}` が表示されればバックエンドは正常

---

## 2. フロントエンドの起動

**別のターミナル（ターミナル2）** で実行:

```bash
cd frontend
flutter pub get
flutter run
```

- 実行すると「どのデバイスで動かすか」を聞かれる
  - **Chrome**: `flutter run -d chrome`
  - **iOS シミュレータ**: 一覧から選ぶ
  - **接続した実機**: 一覧から選ぶ
- アプリが起動したら、画面上で **YouTube のURL** を入力して「要約する」を押す

---

## 3. 動作確認の流れ（まとめ）

| 順番 | やること |
|------|----------|
| 1 | バックエンドで `.env` を作成し、**ANTHROPIC_API_KEY** を設定 |
| 2 | **ターミナル1**: `cd backend` → `source .venv/bin/activate` → `uvicorn app.main:app --reload --host 0.0.0.0 --port 8000` |
| 3 | ブラウザで http://localhost:8000/health を開き `{"status":"ok"}` を確認 |
| 4 | **ターミナル2**: `cd frontend` → `flutter run`（または `flutter run -d chrome`） |
| 5 | アプリで YouTube URL を入力して「要約する」→ 要約結果が表示されるか確認 |

---

## よくあること

- **「要約の取得に失敗しました」**
  - バックエンドが起動しているか確認（ターミナル1が動いているか）
  - `.env` の **ANTHROPIC_API_KEY** が正しいか確認
- **「この動画には利用可能な字幕がありません」**
  - その動画に字幕（日本語 or 英語など）が付いているか確認。別の動画で試す
- **Flutter で「No devices found」**
  - `flutter run -d chrome` で Web で起動するか、シミュレータ／実機を用意する
